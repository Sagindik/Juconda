(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{702:function(e,t,r){e.exports={}},728:function(e,t,r){"use strict";r(702)},735:function(e,t,r){"use strict";var o=r(0),n=r(68),c=r(292),l=(r(53),r(20),r(56),{});l.props={promo:{type:Object,required:!0},dateNowUT:{type:Number,default:Date.now()/1e3}},l.setup=function(e,t){var r=e,l=Object(o.computed)((function(){return r.promo["date-end-timestamp"]||0})),d=Object(n.a)("time-expired"),m=Object(c.a)(),v=m.timeFormattedExtended,f=m.start,O=m.finished;var j=Object(o.computed)((function(){return r.dateNowUT>l.value-86400})),label=Object(o.computed)((function(){return O.value?"Акция закончилась":j.value?"До конца акции":(e=1e3*l.value,t=new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long"}).format(e),r=(new Date).getFullYear()===new Date(e).getFullYear()?"(".concat(new Intl.DateTimeFormat("ru-RU",{weekday:"long"}).format(e),")"):"".concat(new Date(e).getFullYear(),"г."),"До ".concat(t," ").concat(r));var e,t,r})),_=Object(o.computed)((function(){return j.value})),h=Object(o.computed)((function(){return"00".concat(v.value.hours).slice(-2)})),y=Object(o.computed)((function(){return"00".concat(v.value.min).slice(-2)})),w=Object(o.computed)((function(){return"00".concat(v.value.sec).slice(-2)})),x=Object(o.computed)((function(){return{finished:O.value,lessThanDayLeft:j.value,dateEndTimestamp:l.value,timeFormattedExtended:v.value}}));return Object(o.onMounted)((function(){f(l.value-r.dateNowUT)})),Object(o.watch)(O,(function(e){!0===e&&d("time-expired")}),{immediate:!0}),{dateEndTimestamp:l,label:label,showTimer:_,hours:h,min:y,sec:w,payload:x}};var d=l,m=(r(728),r(2)),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dateEndTimestamp?r("div",{staticClass:"promo-timer"},[r("div",{staticClass:"promo-timer__description"},[r("IntersectionObserver",{attrs:{prefix:"promo-life-time",data:e.payload,once:""}}),e._v(" "),r("MIcon",{staticClass:"promo-timer__icon",attrs:{name:"sale",size:"24px"}}),e._v(" "),r("div",{staticClass:"promo-timer__text",class:{"promo-timer__text--alarm":e.showTimer}},[e._v("\n      "+e._s(e.label)+"\n    ")])],1),e._v(" "),e.showTimer?r("div",{staticClass:"promo-timer__timer"},[r("span",{staticClass:"promo-timer__time"},[e._v(e._s(e.hours))]),e._v(" :\n    "),r("span",{staticClass:"promo-timer__time"},[e._v(e._s(e.min))]),e._v(" :\n    "),r("span",{staticClass:"promo-timer__time"},[e._v(e._s(e.sec))])]):e._e()]):e._e()}),[],!1,null,null,null);t.a=component.exports},801:function(e,t,r){e.exports={}},900:function(e,t,r){"use strict";r(801)},947:function(e,t,r){"use strict";r.r(t);var o=r(68),n=r(21),c=r(0),l=r(661),d=(r(29),r(48)),m=r(662),v=r(735),f=r(51),O=r(6),j={};j.props={breadcrumbs:Array,promo:{type:Object,default:null},slug:{type:String,required:!0},buttonLabel:{type:String,default:"Подробнее об акции"}},j.setup=function(e,t){var r=e,n=Object(o.a)(["promo-more-click"]);return{detailTitle:Object(c.computed)((function(){return r.promo.name||""})),detailText:Object(c.computed)((function(){return r.promo["text-preview"]||r.promo["text-detail"]||""})),openFullDescription:function(){n("promo-more-click"),Object(f.v)({slug:r.slug})},openModalAndRedirect:function(){return Object(f.v)({slug:r.slug,redirect:O.j})}}},j.components=Object.assign({MPageHeader:m.a,PromoTimer:v.a},j.components);var _=j,h=(r(900),r(2)),y=Object(h.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("MPageHeader",{staticClass:"m-page-header--promo",attrs:{breadcrumbs:e.breadcrumbs,title:e.detailTitle},scopedSlots:e._u([{key:"timer",fn:function(){return[e.promo?r("PromoTimer",{staticClass:"m-page-header__timer",attrs:{promo:e.promo},on:{"time-expired":e.openModalAndRedirect}}):e._e()]},proxy:!0},{key:"description",fn:function(){return[e.promo?[r("p",{staticClass:"m-page-header__text",domProps:{innerHTML:e._s(e.detailText)}}),e._v(" "),r("IntersectionObserver",{attrs:{prefix:"more-about-promo-button",once:""}}),e._v(" "),r("m-button",{attrs:{label:e.buttonLabel,black:""},on:{click:e.openFullDescription}})]:e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,w=(r(12),r(13),r(14),r(9),r(15),r(4)),x=(r(53),r(182),r(10),r(5),r(112)),P=r(707),C=r(740);function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(w.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L={};L.props={promo:{type:Object,required:!0},slug:{type:String,required:!0},productFiltersHideCount:{type:Number,default:5}},L.setup=function(e,t){var r=e,o=Object(n.h)(),m=Object(c.computed)((function(){var e,t=(null===(e=o.query)||void 0===e?void 0:e.sort)||"popular";return{params:D(D({},o.query),{},{sort:t,spread:void 0}),catalogName:r.promo["product-category-code"]}})),v=Object(l.a)("useCatalog.fetch",m.value),j=v.refresh,_=v.pending,h=v.success,y=Object(d.e)(Object(x.a)()),w=y.productList,P=y.productFilters,T=y.pagesCount,L=Object(C.a)().filtersApplied,F=Object(c.computed)((function(){var e,t;return!L.value&&(null===(e=w.value)||void 0===e?void 0:e.length)<=r.productFiltersHideCount?[]:(null===(t=P.value)||void 0===t?void 0:t.filter((function(e){return"category"!==e.code})))||[]})),k=Object(c.computed)((function(){return _.value||!w.value.length&&!L.value}));function E(){!h.value||L.value||w.value.length||Object(f.v)({slug:r.slug,redirect:O.j})}return Object(c.onMounted)((function(){return E()})),Object(c.watch)(h,(function(){return E()})),Object(c.watch)(m,(function(){return j(m.value)})),{productListData:w,pagesCount:T,displayFilters:F,showLoader:k}},L.components=Object.assign({ProductList:P.a},L.components);var F=L,k=Object(h.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showLoader?r("Loader"):[e._t("header"),e._v(" "),r("div",{staticClass:"m-container-main"},[r("ProductList",{attrs:{filters:e.displayFilters,"product-list":e.productListData,"pages-count":e.pagesCount}})],1)]],2)}),[],!1,null,null,null).exports,E=r(184),M={setup:function(e,t){var r=Object(o.a)(["promo-details-view"]),m=[Object(n.h)(),Object(E.a)()],v=m[0],j=m[1],_=Object(d.e)(j).promoDetail,h=Object(c.computed)((function(){return v.params.slug})),y=Object(c.computed)((function(){var e;return(null===(e=_.value)||void 0===e?void 0:e.slug)===h.value?_.value.data:null})),w=Object(c.computed)((function(){var e;return!(null===(e=y.value)||void 0===e||!e["product-category-code"])})),x=Object(c.computed)((function(){var e;return(null===(e=y.value)||void 0===e?void 0:e.name)||""})),P=Object(c.computed)((function(){var e,t;return(null===(e=y.value)||void 0===e?void 0:e["text-preview"])||(null===(t=y.value)||void 0===t?void 0:t["text-detail"])||""})),C=Object(c.computed)((function(){return[{id:v.fullPath,label:x.value}]})),T=Object(c.computed)((function(){return{name:O.j}})),D=Object(c.computed)((function(){return{name:O.i}})),L=Object(l.a)("useHome.fetchPromoDetail",{slug:h.value}),F=L.pending,k=L.error,M=L.refresh;return Object(c.onMounted)((function(){y.value&&!w.value&&Object(f.v)({slug:h.value})})),Object(c.watch)(w,(function(e){e&&r("promo-details-view",y.value)}),{immediate:!0}),Object(n.e)({title:x,meta:[{hid:"description",name:"description",content:P}]}),Object(c.watch)(h,(function(e){return M({slug:e})})),{slug:h,promo:y,displayPromo:w,breadcrumbs:C,redirectConfig:T,errorRedirectConfig:D,pending:F,error:k}}};M.components=Object.assign({PromoProductList:k,PromoHeader:y},M.components);var H=M,R=Object(h.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.pending?r("Loader"):e.displayPromo?r("div",{staticClass:"promo-detail"},[r("PromoProductList",{attrs:{promo:e.promo,slug:e.slug},scopedSlots:e._u([{key:"header",fn:function(){return[r("PromoHeader",{attrs:{breadcrumbs:e.breadcrumbs,promo:e.promo,slug:e.slug}})]},proxy:!0}])})],1):e.error?r("Redirect",{attrs:{config:e.errorRedirectConfig}}):r("Redirect",{attrs:{config:e.redirectConfig}})}),[],!1,null,null,null);t.default=R.exports}}]);