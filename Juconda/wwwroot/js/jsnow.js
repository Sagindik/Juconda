!function(e){e.fn.jSnow=function(o){var a,t,l=e.extend({},e.fn.jSnow.defaults,o),n=l.flakes,r=l.flakeCode,i=l.flakeColor,f=l.flakeMinSize,s=l.flakeMaxSize,p=l.fallingSpeedMin,d=l.fallingSpeedMax,h=l.interval,c=l.zIndex,v=l.vSize,w=l.fadeAway,M=l.followScroll;x();var u=!1;e.browser.msie&&parseFloat(e.browser.version)<8&&(u=!0),e.browser.msie&&parseFloat(e.browser.version)<8&&"auto"==c&&(c=0);var g=e("<div />");g.css({width:a+"px",height:1,display:"block",overflow:"visible",position:"absolute",left:"1px",zIndex:c}),M?g.css("top",e("html").scrollTop()+1+"px"):g.css="1px",e("body").prepend(g).css({height:"100%"}),e("html").css({"overflow-y":"scroll","overflow-x":"hidden"});var m=Array();function x(){a=e("body").width(),v?t=v:(t=window.innerHeight||document.documentElement.clientHeight,t-=50)}function S(o,l){o=o||1,l=l||!1;var n=0;for(n=0;n<o;n++){var h=e("<span />"),v=f+Math.floor(Math.random()*s),w=r[Math.floor(Math.random()*r.length)];if(-1!=w.indexOf(".gif")||-1!=w.indexOf(".png")){var M=new Image;u&&(w=w.replace("png","gif")),M.src=w,w="<img src='"+w+"' alt='jSnowFlake'>"}h.html(w).css({color:i[Math.floor(Math.random()*i.length)],fontSize:v+"px",display:"block",position:"absolute",cursor:"default","z-index":c}),e(g).append(h),f_left=Math.floor(Math.random()*(a-h.width()-50))+25,f_top=l?-1*h.height():Math.floor(Math.random()*(t-50));var x=Math.floor(90*Math.random());jQuery.data(h,"posData",{top:f_top,left:f_left,rad:50*Math.random(),i:Math.ceil(p+Math.random()*(d-p)),swingRange:x}),h.css({top:f_top+"px",left:f_left+"px"}),m.push(h)}}return S(n,!1),setInterval((function(){var e=0;for(e=m.length-1;e>=0;e--){var o=m[e],a=jQuery.data(o,"posData");a.top+=a.i;var l=Number();l=Math.cos(a.rad/180*Math.PI),a.rad+=2;var n=a.left-l*a.swingRange;w&&(op=t-a.top<100?(t-a.top)/100:1,o.css("opacity",op)),o.css({top:a.top+"px",left:n+"px"}),a.top>t&&(jQuery.removeData(o),o.remove(),m.splice(e,1),S(1,!0))}}),h),window.onresize=x,M&&(window.onscroll=function(){g.css({top:e("html").scrollTop()+"px"})}),this},e.fn.jSnow.defaults={flakes:30,fallingSpeedMin:1,fallingSpeedMax:3,flakeMaxSize:20,flakeMinSize:10,flakeCode:["&bull;"],flakeColor:["#fff"],zIndex:"auto",interval:50}}(jQuery);